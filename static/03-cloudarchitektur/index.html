<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Cloud-Architekturmuster | Verteilte Systeme</title>

        <script src="../_bundle.js"></script>
        <link rel="stylesheet" href="../_bundle.css" />
        <link rel="shortcut icon" href="../favicon.png" />

        <script>
            function change_example(event) {
                let label             = event.target.textContent       || "";
                let dropdownSelector  = event.target.dataset.dropdown  || "";
                let containerSelector = event.target.dataset.container || "";
                let showSelector      = event.target.dataset.show      || "";

                if (dropdownSelector) {
                    document.querySelectorAll(dropdownSelector).forEach(element => element.textContent = label);
                }
                if (containerSelector) {
                    document.querySelectorAll(`${containerSelector} > *`).forEach(element => element.classList.add("hidden"));
                }

                if (showSelector) {
                    document.querySelectorAll(showSelector).forEach(element => element.classList.remove("hidden"));
                }
            }
        </script>
    </head>

    <body class="hidden">
        <!-- Seitenkopf und Inhaltsverzeichnis -->
        <header>
            <div id="title">
                <h1>Cloud-Architekturmuster</h1>
                <h2 id="page-title"></h2>
            </div>

            <section id="toc" data-title="Inhaltsverzeichnis"></section>
        </header>

        <!-- Folien -->
        <main>
            <!-- ========== -->
            <!-- Einleitung -->
            <!-- ========== -->
            <section data-title="Einleitung" data-chapter></section>
            
            <section data-title="Lernziele" data-background-image="../trennfolie.jpg">
                <div class="card flex-fill mb-3">
                    <div class="card-header fw-bold dhbw-lightblue">
                        Definition des Cloud-Begriffs
                    </div>
                    <div class="card-body p-3 markdown">
                        * Das Werteversprechen der Cloud von anderen Ans√§tzen unterscheiden k√∂nnen
                        * Das Cloud-Betriebsmodell von klassischem Hosting unterscheiden k√∂nnen
                        * Die Bedeutung von **Virtualisierung** f√ºr Hosting und Cloud einsch√§tzen k√∂nnen
                        * **Elastizit√§t und Skalierung** in der Cloud beschreiben k√∂nnen
                        * Verschiedene Arten von **As-a-Service**-Angeboten einordnen k√∂nnen
                    </div>
                </div>

                <div class="card flex-fill">
                    <div class="card-header fw-bold dhbw-lightblue">
                        Verteilte Anwendungen in der Cloud
                    </div>
                    <div class="card-body p-3 markdown">
                        * Die Vor- und Nachteile einer **Microservice-Architektur** erkl√§ren k√∂nnen
                        * Die typischen Probleme monolithischer Anwendungen einordnen k√∂nnen
                        * Typische Architekturmuster wie **API-Gateway** kennen
                        * Die Begriffe **12-Faktor-App** und **Cloud Native App** erkl√§ren k√∂nnen
                        * Die Wichtigkeit von **Observability** f√ºr verteilte Anwendungen verstehen
                        * Nutzen und Zusammenspiel von **Logs, Traces und Metriken** beschreiben k√∂nnen
                    </div>
                </div>
            </section>

            <!-- ============================= -->
            <!-- Definition des Cloud-Begriffs -->
            <!-- ============================= -->
            <section data-title="Definition des Cloud-Begriffs" data-chapter></section>
            <section data-title="Definition des Cloud-Begriffs" data-background-image="../trennfolie.jpg"></section>

            <section data-title="Grundlagen der Cloud-Architektur" class="limited-width">
                <lsx-youtube video="_epyprLse_4" aspect-ratio="16x9" style="width: 50em; max-width: 100%;"></lsx-youtube>
                <a href="https://youtu.be/_epyprLse_4" target="_blank">Link zum Video</a>

                <lsx-info-box type="warning" class="mt-3">
                    Das Video bezieht sich an manchen Stellen noch auf die Entwicklung mit Java und
                    dem Spring-Framework. Auch wenn wir inzwischen Node.js/JavaScript in der Vorlesung
                    verwenden, sind die Grundprinzipien jedoch dieselben.
                </lsx-info-box>
            </section>

            <section data-title="Die Cloud aus Konsumentensicht" class="dhbw-limited-width2">
                <img src="cloud-storage.png" class="d-block w-100 mb-5">

                <div class="d-flex flex-column flex-md-row gap-2">
                    <img src="cat1.jpg" class="d-block w-100 img-thumbnail">
                    <img src="cat2.jpg" class="d-block w-100 img-thumbnail">
                    <img src="cat3.jpg" class="d-block w-100 img-thumbnail">
                    <img src="cat4.jpg" class="d-block w-100 img-thumbnail">
                </div>

                <small>
                    <small>
                        Zitat gefunden auf:
                        <a href="https://docs.kraudcloud.com/technology/storage/" target="_blank">kraudcloud.com</a>, <br>
                        
                        Bildnachweise:
                        <a href="https://pixabay.com/photos/cat-pet-licking-animal-tabby-cat-323262/" target="_blank">Pixabay: TeamK</a>,
                        <a href="https://pixabay.com/photos/cat-kitten-pets-animals-housecat-2934720/" target="_blank">Pixabay: Kirgiz03</a>,
                        <a href="https://pixabay.com/photos/cat-siamese-cat-fur-kitten-2068462/" target="_blank">Pixabay: webandi</a>,
                        <a href="https://pixabay.com/photos/cat-tired-yawn-stretch-814952/" target="_blank">Pixabay: jonathansautter</a>
                    </small>
                </small>
            </section>

            <section data-title="Abgrenzung von typischen Onlinediensten" class="dhbw-limited-width2">
                <div class="markdown mt-3 mb-3">
                    Anwendungen zum Synchronisieren von Dateien wie Dropbox, OneDrive oder Owncloud
                    werden umgangssprachlich oft als Cloud bezeichnet. Man sagt, dass die Dateien
                    _mit der Cloud synchronisiert_ werden. Dies ist jedoch problematisch, da ‚ÄûCloud‚Äù
                    hier lediglich sinnbildlich f√ºr einen irgendwie gearteten Onlinedienst steht.
                    Hinzu kommt, dass zumindest Owncloud gar keine Cloud-Anwendung ist, sondern eine
                    in PHP implementierte, traditionelle Webanwendung. Nach dieser Definition m√ºsste
                    demnach jede Webanwendung auch eine Cloud-Anwendung sein.
                </div>

                <lsx-grid-fluid class="p-0">
                    <lsx-row>
                        <lsx-col size="md">
                            <img src="dropbox-screenshot.png" class="d-block img-thumbnail" style="height: 100%;"/>
                        </lsx-col>
                        <lsx-col size="md">
                            <img src="owncloud-screenshot.png" class="d-block img-thumbnail" style="height: 100%;"/>
                        </lsx-col>
                    </lsx-row><lsx-row>
                        <lsx-col size="md">
                            <img src="owncloud-quellcode.png" class="d-block img-thumbnail" style="height: 100%;"/>
                        </lsx-col>
                        <lsx-col size="md">
                            <img src="owncloud-installation.png" class="d-block img-thumbnail" style="height: 100%;"/>
                        </lsx-col>
                    </lsx-row>
                </lsx-grid-fluid>
            </section>

            <section data-title="Abgrenzung von klassischem Hosting" class="dhbw-limited-width2">
                <div class="markdown mt-3 mb-3">
                    Schon fr√ºher war es insbesondere f√ºr kleinere Unternehmen √ºblich, die Hardware zur
                    Bereitstellung eines Onlinedienstes nicht selbst zu betreiben. Dieses Modell wird
                    Hosting genannt, da der Anbieter zwar die Hardwareplattform (den Host) zur Verf√ºgung
                    stellt, Installation und Betrieb der Anwendung aber immer noch selbst vorgenommen
                    werden m√ºssen.
                </div>

                <div class="d-flex gap-3 flex-column flex-md-row">
                    <div class="card flex-grow-1 w-100">
                        <img src="hosting-dedicated.jpg" class="card-img-top">
                        <div class="card-header border-top fw-bold">
                            Dedicated Root Server                        
                        </div>
                        <div class="card-body markdown small">
                            Hier vermietet der Anbieter einen dedizierten Computer an den Kunden.
                            Installation und Einrichtung m√ºssen, sofern es kein ‚Äûmanaged‚Äù Angebot
                            mit zus√§tzlicher Dienstleistung ist, aus der Ferne selbst erledigt werden.
                            Im Gegenzug k√∂nnen jedes beliebige Betriebsystem und jede Software
                            aufgespielt werden.
                        </div>
                    </div>

                    <div class="card flex-grow-1 w-100">
                        <img src="hosting-vserver.png" class="card-img-top">
                        <div class="card-header border-top fw-bold">
                            Virtual Private Server
                        </div>
                        <div class="card-body markdown small">
                            Hier steht eine virtuelle Maschine zur Verf√ºgung, die sich weitgehend wie
                            dedizierte Hardware nutzen l√§sst. Die Ressourcen k√∂nnen jedoch geringer
                            ausfallen, da die Hardware von vielen Kunden geteilt wird. Die Installation
                            eines eigenen Betriebssystems kann ebenfalls mit Einschr√§nkungen verbunden sein.
                        </div>
                    </div>

                    <div class="card flex-grow-1 w-100">
                        <img src="hosting-web.png" class="card-img-top">
                        <div class="card-header border-top fw-bold">
                            Web Hosting
                        </div>
                        <div class="card-body markdown small">
                            Hier wird lediglich der Webserver virtualisiert und etwas Speicherplatz in
                            einer vorkonfigurierten Serverfarm angeboten. Die Einstellungsm√∂glichkeiten
                            sind sehr begrenzt und oft auf traditionelle Webanwendungen mit PHP als
                            Programmiersprache und MariaDB als Datenbank zugeschnitten.
                        </div>
                    </div>
                </div>

                <small>
                    <small>
                        ¬π Bildnachweis:
                        <a href="https://pixabay.com/photos/technology-servers-server-1587673/" target="_blank">Pixabay: heladodementa</a>
                    </small>
                </small>
            </section>

            <section data-title="Virtualisierung im Hosting" class="dhbw-limited-width2">
                <div class="dhbw-limited-width m-auto mb-5">
                    <div class="markdown mb-3 mt-3">
                        Um √∂konomische Skaleneffekte auszunutzen, beruhen die meisten Hostingangebote auf
                        der Virtualisierung bestimmter Ressourcen, wobei der Begriff auf zwei Arten definiert
                        werden kann.
                    </div>
                    <lsx-accordion>
                        <lsx-accordion-page title="Virtualit√§t im allgemein Wortsinn">
                            <blockquote class="blockquote">
                                <p class="small">
                                    Virtualit√§t ist die Eigenschaft einer Sache, nicht in der Form zu existieren,
                                    in der sie zu existieren scheint, aber in ihrem Wesen oder ihrer Wirkung einer
                                    in dieser Form existierenden Sache zu gleichen. Virtualit√§t bezeichnet also eine
                                    gedachte Entit√§t, die in ihrer Funktionalit√§t oder Wirkung vorhanden ist.
                                </p>
                                <figcaption class="blockquote-footer small">
                                    <cite>Wikipedia zum Begriff ‚ÄûVirtualit√§t‚Äù</cite>
                                </figcaption>
                            </blockquote>
                        </lsx-accordion-page>
    
                        <lsx-accordion-page title="Virtualisierung in der Informatik">
                            <blockquote class="blockquote">
                                <p class="small">
                                    Virtualisierung bezeichnet in der Informatik die Nachbildung eines Hard- oder
                                    Software-Objekts durch ein √§hnliches Objekt vom selben Typ mit Hilfe einer
                                    Abstraktionsschicht. Dadurch lassen sich virtuelle (d.&nbsp;h. nicht-physische)
                                    Ger√§te oder Dienste wie emulierte Hardware, Betriebssysteme, Datenspeicher oder
                                    Netzwerkressourcen erzeugen.
                                </p>
                                <figcaption class="blockquote-footer small">
                                    <cite>Wikipedia zum Begriff ‚ÄûVirtualisierung‚Äù</cite>
                                </figcaption>
                            </blockquote>
                        </lsx-accordion-page>
                    </lsx-accordion>
                </div>

                <div class="d-flex gap-3 flex-column flex-md-row">
                    <div class="flex-grow-1 w-100 markdown small">
                        <img src="virtualisierung-hardware.png" class="w-100 mb-3" alt="Hardware-Virtualisierung">
                        
                        Virtualisierte Hardware bietet die gr√∂√üte Flexibilit√§t, da sie sich aus Kundensicht
                        wie dedizierte Hardware verh√§lt. Der Kunde mietet zwar keinen physischen Computer,
                        kann aber dennoch beliebige Software aufspielen.
                    </div>
                    <div class="flex-grow-1 w-100 markdown small">
                        <img src="virtualisierung-betriebssystem.png" class="w-100 mb-3" alt="Betriebssystem-Virtualisierung">
                        
                        Preisg√ºnstigere Angebote virtualisieren in der Regel nur das Betriebssystem, wodurch
                        mehr Kunden bedient werden k√∂nnen. Die Installation beschr√§nkt sich daher auf kompatible
                        Systemumgebungen und Anwendungen.
                    </div>
                    <div class="flex-grow-1 w-100 markdown small">
                        <img src="virtualisierung-server.png" class="w-100 mb-3" alt="Server-Virtualisierung">
                        
                        Einfache Hostingangebote virtualisieren lediglich die Serveranwendung. Die Kunden bekommen
                        eine eigene Domain und etwas Speicherplatz mit sehr beschr√§nkten Einstellungsm√∂glichkeiten.
                    </div>
                </div>

                <small>
                    <small>
                        Bildnachweise:
                        <a href="https://de.wikipedia.org/wiki/Datei:Apache_Feather_Logo.svg" target="_blank">Wikipedia: Apache_Feather_Logo.svg</a>,
                        <a href="https://de.m.wikipedia.org/wiki/Datei:Tux.svg" target="_blank">Wikipedia: Tux.svg</a>,
                        <a href="https://commons.wikimedia.org/wiki/File:Daemon-phk.svg" target="_blank">Wikipedia: Daemon-phk.svg</a>,
                        <a href="https://de.m.wikipedia.org/wiki/Datei:Windows_logo_-_2012.svg" target="_blank">Wikipedia: Windows logo - 2012.svg</a>,
                        <a href="https://icon-icons.com/de/symbol/tux-logo/214728" target="_blank">icon-icons.com: Tux Logo</a>
                    </small>
                </small>
            </section>

            <section data-title="Grundidee der Cloud" class="mb-3">
                <lsx-grid-fluid class="p-0">
                    <lsx-row>
                        <lsx-col size="md-9" class="mb-3">
                            <img src="cloud-betriebsmodell.png" class="d-block w-100" />
                        </lsx-col>
                        <lsx-col size="md" class="d-flex flex-column gap-3">
                            <div class="card">
                                <div class="card-header fw-bold">
                                    Automatisierung
                                </div>
                                <div class="card-body markdown small">
                                    Die Grundidee der Cloud ist, die Bereitstellung und den Betrieb verteilter
                                    Anwendungen so weit wie m√∂glich zu automatisieren. Eine Cloudumgebung besteht
                                    daher aus einem gro√üen Rechencluster, dessen Ressourcen auf viele Anwendungen
                                    aufgeteilt werden. Manuelle Installationsschritte sollen vermieden werden.
                                    {.mb-0}
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header fw-bold">
                                    Isolation
                                </div>
                                <div class="card-body markdown small">
                                    Die physischen und virtuellen Maschinen sowie Speicherressourcen einer Cloudumgebung
                                    werden vollst√§ndig abstrahiert, wodurch jede Anwendung einen eigenen, **virtuellen
                                    Computercluster** erh√§lt. H√§ufig (aber nicht immer) wird dabei auch das Netzwerk
                                    virtualisiert, wodurch interne Services in einem **privaten Netzwerk** vor √∂ffentlichen
                                    Zugriffen gesch√ºtzt werden k√∂nnen.
                                    {.mb-0}
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header fw-bold">
                                    Skalierung und Elastizit√§t
                                </div>
                                <div class="card-body markdown small">
                                    **Skalierung** beschreibt die Anpassung der zur Verf√ºgung gestellten Ressourcen
                                    entsprechend dem Leistungsbedarf einer Anwendung. Beim klassischen Hosting und
                                    bei sehr einfachen Cloud-Installationen ist dies nur durch manuelles Eingreifen
                                    m√∂glich. Echte Cloud-Anwendungen sind jedoch **elastisch**, so dass der Cluster
                                    die Ressourcen automatisch skalieren kann.
                                    {.mb-0}
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header fw-bold">
                                    Variable Kosten
                                </div>
                                <div class="card-body markdown small">
                                    Aufgrund der dynamischen Ressourcenzuteilung bieten viele Cloud-Angebote eine
                                    **nutzungsabh√§ngige Abrechnung**, die sich nach Anzahl der tats√§chlich genutzten
                                    Minuten zur Ausf√ºhrung von Programmcode, tats√§chlich belegtem Speicherplatz
                                    oder Netzwerktraffic richtet. Im Vergleich zu klassischem Hosting fallen die
                                    durchschnittlichen Kosten daher oft geringer aus.
                                    {.mb-0}
                                </div>
                            </div>
                        </lsx-col>
                    </lsx-row>
                </lsx-grid-fluid>
            </section>

            <section data-title="Pet vs. Cattle" class="dhbw-limited-width2">
                <div class="d-flex gap-3 flex-column flex-md-row">
                    <div class="card flex-grow-1 w-100">
                        <img src="pet-vs-cattle-1.jpg" class="card-img-top">
                        <div class="card-header border-top fw-bold">
                            Hosting
                        </div>
                        <div class="card-body small">
                            Die Software wird gehegt und gepflegt wie ein Haustier.
                        </div>
                    </div>
                
                    <div class="card flex-grow-1 w-100">
                        <img src="pet-vs-cattle-2.jpg" class="card-img-top">
                        <div class="card-header border-top fw-bold">
                            Cloud
                        </div>
                        <div class="card-body small">
                            Die Software wird wie Vieh in der Massentierhaltung behandelt.
                        </div>
                    </div>
                </div>

                <small>
                    <small>
                        Bildnachweise:
                        <a href="https://pixabay.com/photos/children-dog-pet-cute-footwear-1866531/" target="_blank">Pixabay: Pexels</a>,
                        <a href="https://pixabay.com/photos/sheeps-animals-mammals-live-stock-6828766/" target="_blank">Pixabay: smoms_photography</a>
                    </small>
                </small>
            </section>

            <section data-title="Das As-a-Service-Gesch√§ftsmodell" class="dhbw-limited-width2">
                <div class="markdown mt-3 mb-5">
                    Cloudangebote werden h√§ufig mit dem Namenszusatz ‚Äûas-a-Service‚Äù angeboten,
                    wie beispielsweise ‚ÄûDatabase-as-a-Service‚Äú oder ‚ÄûSoftware-as-a-Service".
                    Damit ist gemeint, dass die jeweilige Software **nicht klassisch lizenziert,
                    sondern als Dienstleistung** vermarktet wird. Installation, Betrieb und Pflege
                    werden fallen in die Verantwortung des Anbieters, wodurch diese aus Kundensicht
                    komplett ausgelagert werden k√∂nnen.
                </div>

                <div class="d-flex gap-3 flex-column flex-md-row mb-4">
                    <div class="flex-grow-1 w-100 markdown small">
                        ### Infrastructure-as-a-Service {.mb-3}

                        <img src="modelle-iaas.png" class="w-100 mb-3">
                
                        Im einfachsten Fall stellt die Cloud virtuelle Maschinen zur manuellen Einrichtung
                        sowie dazugeh√∂rige Dienste wie Objektspeicher und Netzwerkrouting zur Verf√ºgung.
                        Lediglich die Bereitstellung aus Sicht des Cloudanbieters wird dabei automatisiert.
                    </div>
                    <div class="flex-grow-1 w-100 markdown small">
                        ### Platform-as-a-Service {.mb-3}

                        <img src="modelle-paas.png" class="w-100 mb-3">
                
                        Auf die Entwicklung von Cloudanwendungen zugeschnittene Angebote bieten eine
                        vorkonfigurierte Laufzeitumgebung f√ºr selbstgeschriebenen Quellcode. Deployment
                        und Betrieb werden weitgehend automatisiert. Es besteht jedoch die Gefahr von
                        Vendor Lock-In aufgrund der Verwendung anbieterspezifischer Bibliotheken.
                    </div>
                    <div class="flex-grow-1 w-100 markdown small">
                        ### Software-as-a-Service {.mb-3}

                        <img src="modelle-saas.png" class="w-100 mb-3">
                
                        Am weitesten abstrahiert sind SaaS-Angebote zur Bereitstellung ganzer Anwendungspakete.
                        Als Kunde registriert man sich lediglich f√ºr eine Anwendung, die gegen eine monatliche
                        Geb√ºhr zur Verf√ºgung gestellt wird. Alle Kunden teilen sich meist den Quellcode, w√§hrend
                        die Daten getrennt werden.
                    </div>
                </div>

                <div class="markdown">
                    Angebote wie **Function-as-a-Service** (auch **Serverless** genannt, da die Verwaltung von Serverinstanzen komplett
                    wegabstrahiert wird) oder **Database-as-a-Service** richten ebenfalls an Anwendungsentwickler und z√§hlen deshalb zu
                    Platform-as-a-Service.
                    
                    Die gro√üen Anbieter wie Amazon, Google oder Microsoft bieten grunds√§tzlich eine Mischung aus allen Modellen, w√§hrend
                    sich kleinere Anbieter wie [Heroku](https://heroku.com/){target="_blank"}, [Render](https://render.com/){target="_blank"},
                    [Fly.io](https://fly.io/){target="_blank"} meist auf Plattformdienste beschr√§nken.
                    [MongoDB Atlas](https://www.mongodb.com/de-de/atlas){target="_blank"}, [Auth0](https://auth0.com/){target="_blank"}
                    und viele mehr zielen hingegen auf ganz spezielle Anwendungsf√§lle ab.
                </div>
            </section>

            <section data-title="Container-Virtualisierung in der Cloud" class="w-100">
                <div class="dhbw-limited-width2 d-flex flex-column flex-lg-row align-items-center gap-3 m-auto mt-3 mb-4">
                    <img src="virtualisierung-container.png" class="d-block" style="width: 24em; max-width: 100%;">
                    <div class="markdown flex-grow-1">
                        Viele Cloudumgebungen nutzen Container-Virtualisierung, um beliebige Workloads ausf√ºhren zu k√∂nnen.
                        Die auszuf√ºhrenden Anwendungen und Services werden hierf√ºr in **Anwendungscontainer** verpackt, die ein
                        **sehr abgespecktes Dateisystem** mit den notwendigsten **Bibliotheken**, **Hilfsprogrammen** sowie
                        dem **Anwendungscode** beinhalten und somit das zugrunde liegende Linux-System **wegabstrahieren**.
                        Der Anwendung wird dadurch vorget√§uscht, sie sei die einzige innerhalb des Host-Betriebssystems
                        ausgef√ºhrte Anwendung, was **Isolation** genannt wird.

                        Hierbei wird zwischen Container-Abbild (Image) und Container-Instanz unterschieden:

                         * **Image:** Bin√§rpaket, das innerhalb der Cloud deployed werden kann
                         * **Instanz:** Tats√§chlich ausgef√ºhrter Container auf einem Rechnerknoten
                        
                        Die Erstellung der Images wird grunds√§tzlich automatisiert. Unterschiede bestehen lediglich in
                        den verwendeten Werkzeugen und den hierf√ºr ben√∂tigten Konfigurationsdateien. Typische Quellcodes einer
                        bestimmten Programmiersprache k√∂nnen h√§ufig ohne Konfiguration direkt deployed werden, wobei ein in der
                        Cloud laufendes **Buildpack** diese in Anwendungscontainer verpackt. Meist kann der Prozess durch
                        zus√§tzliche Konfigurationsdateien beeinflusst werden, wenn man die Container nicht alternativ selbst baut. {.mb-0}
                    </div>
                </div>
                
                <div class="dhbw-limited-width2 m-auto mb-5 markdown">
                    Das folgende Beispiel zeigt einen typischen **DevOps-Workflow**, bei dem die Anwendungscontainer durch eine
                    Continous-Integration/Continous-Deployment-Pipeline automatisiert gebaut, in einer Container-Registrierung
                    abgelegt und anschlie√üend in der Cloud deployed werden.
                </div>
                <img src="devops.png" class="img-fluid w-100">
            </section>

            <!-- ================================== -->
            <!-- Verteilte Anwendungen in der Cloud -->
            <!-- ================================== -->
            <section data-title="Verteilte Anwendungen in der Cloud" data-chapter></section>
            <section data-title="Verteilte Anwendungen in der Cloud" data-background-image="../trennfolie.jpg"></section>

            <section data-title="√úbersichtsvideo zu typischen Architekturmustern" class="limited-width">
                <lsx-youtube video="Q7580888ce4" aspect-ratio="16x9" style="width: 50em; max-width: 100%;"></lsx-youtube>
                <a href="https://youtu.be/Q7580888ce4" target="_blank">Link zum Video</a>
            
                <lsx-info-box type="warning" class="mt-3">
                    Die Einleitung des Videos ist nicht mehr ganz aktuell, da wir in der Vorlesung inzwischen
                    erst die Cloud-Architektur und dann die Programmierung besprechen. Auch programmieren wir
                    inzwischen in JavaScript und nicht mehr mit dem Spring Framework in Java. Von den gelegentlichen
                    Bez√ºgen zu Java und Spring sind die Konzepte des Videos aber auch hier allgemeing√ºltig.
                </lsx-info-box>
                <p>
                    <span class="red fw-bold">And now go!</span> üèÅ üòÖ
                </p>
            </section>

            <section data-title="Anwendungsarchitektur fr√ºher">
                <lsx-grid-fluid class="p-0">
                    <lsx-row>
                        <lsx-col size="md-8" class="mb-3">
                            <img src="monolith.png" class="d-block w-100" />
                        </lsx-col>
                        <lsx-col size="md" class="markdown">
                            Fr√ºhere Anwendungsarchitekturen, bei denen s√§mtliche Funktionen in einer gro√üen Codebasis
                            untergebracht waren, werden heute als **Monolith** bezeichnet. Zwar kann der Quellcode
                            durchaus modular aufgebaut und somit leicht um neue Funktionen erweiterbar sein. Jedoch
                            kann die Anwendung nur als Ganzes deployed und in Betrieb genommen werden.

                            ### Vorteile eines Monolithen {.mt-4}

                            * Einfache Anwendungsarchitektur mit wenigen Komponenten
                            * Insbesondere f√ºr kleine Entwicklerteams leicht handlebar
                            * Eine Programmiersprache f√ºr alle Teile der Anwendung
                            * Direkter Datenaustausch zwischen den Anwendungskomponenten
                            * Anwendungskomponenten k√∂nnen sich gegenseitig direkt aufrufen

                            ### Nachteile eines Monolithen {.mt-4}

                            * Unpraktisch f√ºr sehr gro√üe Anwendungen mit vielen Funktionen
                            * Auswirkungen einer Quellcode√§nderung sind oft schwer nachvollziehbar
                            * In gro√üen Entwicklerteams kommt es oft zu gegenseitigen St√∂rungen
                            * Kein getrenntes Deployment einzelner Anwendungsfunktionen m√∂glich
                            * Vor jedem Deployment muss die komplette Anwendung getestet werden
                            * Fehlerkorrekturen brauchen daher oft lange, bis sie produktiv gehen
                            * Die Anwendung kann nur als Ganzes skaliert werden

                            Cloudanwendungen werden daher h√§ufig mit einer *Microservice-Architektur* gestaltet.
                            F√ºr kleine Entwicklerteams kann ein Monolith trotzdem die bessere Wahl sein. {.mt-4}
                        </lsx-col>
                    </lsx-row>
                </lsx-grid-fluid>
            </section>

            <section data-title="Probleme beim Deployment monolithischer Anwendungen" class="dhbw-limited-width2 p-3">
                <div class="d-flex flex-column flex-md-row gap-5">
                    <img src="wanted-monolith.jpg" class="d-block w-100" alt="Wanted! The Monolith ‚Ä¶">
                    <img src="code-freeze.jpg" class="d-block w-100" alt="It's really, really, really, really code freeze">
                </div>

                <small>
                    <small>
                        Bildnachweise:
                        <a href="https://turnoff.us/geek/not-wanted/" target="_blank">{turnoff.us} not wanted</a>,
                        <a href="https://geek-and-poke.com/geekandpoke/2015/3/25/code-freeze" target="_blank">Geek & Poke: Code Freeze</a>
                    </small>
                </small>
            </section>

            <section data-title="Anwendungsarchitektur heute">
                <lsx-grid-fluid class="p-0 mt-3">
                    <lsx-row>
                        <lsx-col size="md-8" class="mb-3">
                            <div class="dropdown mb-3">
                                <button
                                    id             = "microservices-dropdown"
                                    class          = "btn btn-outline-secondary dropdown-toggle"
                                    style          = "font-size: 0.9rem;"
                                    type           = "button"
                                    data-bs-toggle = "dropdown"
                                    aria-haspopup  = "true"
                                    aria-expanded  = "false"
                                >
                                    Single Page App mit API-Gateway
                                </button>
                                <ul class="dropdown-menu">
                                    <li>
                                        <button
                                            class          = "dropdown-item"
                                            type           = "button"
                                            data-dropdown  = "#microservices-dropdown"
                                            data-container = "#microservices-bilder"
                                            data-show      = "#microservices-bilder-1"
                                            onclick        = "change_example(event)"
                                        >
                                            Single Page App mit API-Gateway
                                        </button>
                                    </li>
                                    <li>
                                        <button
                                            class          = "dropdown-item"
                                            type           = "button"
                                            data-dropdown  = "#microservices-dropdown"
                                            data-container = "#microservices-bilder"
                                            data-show      = "#microservices-bilder-2"
                                            onclick        = "change_example(event)"
                                        >
                                            Webanwendung mit Composite UI
                                        </button>
                                    </li>
                                </ul>
                            </div>

                            <div id="microservices-bilder">
                                <img id="microservices-bilder-1" src="microservices-gateway.png" class="d-block w-100" />
                                <img id="microservices-bilder-2" src="microservices-compositeui.png" class="d-block w-100 hidden" />
                            </div>
                        </lsx-col>
                        <lsx-col size="md" class="markdown">
                            Moderne Anwendungen werden heute oft als **Microservice-Architektur** ausgef√ºhrt, in welcher die
                            Teilfunktionen einer Anwendung in einzelne Serverdienste ausgelagert werden. Microservice-basierte
                            Anwendungen sind daher immer verteilte Anwendungen. Dabei bildet jeder Microservice eine getrennte
                            Einheit, die weitgehend unabh√§ngig entwickelt, deployed und betrieben wird. Meistens besitzt jeder
                            Microservice deshalb eine eigene Datenbank, auf deren Inhalte nur √ºber die √∂ffentliche Schnittstelle
                            des Microservices entfernt zugegriffen werden kann. Martin Fowler definiert Microservices
                            [auf seiner Webseite](https://martinfowler.com/microservices/){target=_blank} daher wie folgt:

                            * Entfernte Serverdienste als Teilkomponenten einer Anwendung
                            * Dezentralisierte Verwaltung und dezentrales Datenmanagement
                            * Entsprechen oft organisatorischer Unternehmenseinheiten
                            * Deshalb meist langfristig durch eigenst√§ndige Teams betreut
                            * √úber eine √∂ffentliche Schnittstelle entfernt aufrufbar
                            * Fehlertoleranter Entwurf mit evolution√§rem Design
                            * Hoher Automatisierungsgrad f√ºr Betrieb und Weiterentwicklung

                            Die √∂ffentliche Benutzeroberfl√§che einer Microservice-basierten Anwendung wird h√§ufig als **Webanwendung**
                            oder **Mobile App** implementiert, wobei Webanwendungen zunehmend Single Page Apps sind, deren generelle
                            Anwendungslogik zwar im Browser l√§uft. Ein **Gateway-Server** versteckt dann in der Regel die einzelnen
                            Backend-Services vor dem Frontend. Alternativ k√∂nnen die Microservices aber auch so genannte **Microfrontends**
                            bereitstellen, die jeweils einen Ausschnitt der darzustellenden Bildschirminhalte liefern und nach dem
                            **Composite UI Pattern** innerhalb eines Anwendungsrahmens eingeblendet werden.

                            ### Vorteile von Microservices {.mt-4}

                            * Die Services sind durch ihre Schnittstellen klar gekapselt.
                            * Jeder Service kann einzeln deployed und skaliert werden.
                            * Sprachen, Bibliotheken, ‚Ä¶ k√∂nnen passend zum Service ausgew√§hlt werden.

                            ### Nachteile von Microservices {.mt-4}

                            * Verteilte Systeme mit vielen Komponenten sind schwer zu programmieren.
                            * Microservices m√ºssen eventuellkonsistent und fehlertolerant programmiert werden.
                            * Deployment, Betrieb und √úberwachung bringen zus√§tzliche Komplexit√§t.

                            Laut Martin Fowler lohnt sich eine Microservice-Architektur daher nur, wenn eine Anwendung hinreichend
                            gro√ü ist und von mehreren Entwicklerteams betreut werden kann. Vgl.
                            [Martin Fowler: Microservice Guide](https://martinfowler.com/microservices/){target=_blank}
                        </lsx-col>
                    </lsx-row>
                </lsx-grid-fluid>
            </section>

            <section data-title="Herausforderungen bei der Nutzung von Microservices" class="dhbw-limited-width2 p-3">
                <div class="d-flex flex-column flex-md-row gap-3">
                    <img src="valentines-day.png" class="d-block w-100" alt="Happy Valentines Day">
                    <img src="microservices-and-monolithic.png" class="d-block w-100" alt="Are you ready for microservices?">
                </div>
            
                <small>
                    <small>
                        Bildnachweise:
                        <a href="https://turnoff.us/geek/valentines-day/" target="_blank">{turnoff.us} valentine's day at the kernel</a>,
                        <a href="https://turnoff.us/geek/are-you-ready-for-microservices/" target="_blank">{turnoff.us} are you ready for microservices?</a>
                    </small>
                </small>
            </section>

            <section data-title="Skalierung von Microservices" class="dhbw-limited-width2">
                <lsx-carousel class="carousel-fade">
                    <lsx-carousel-page>
                        <img src="skalierung-1.png" class="d-block w-100 mb-5">
                        <p>
                            Microservice-Architekturen lassen sich grunds√§tzlich einfacher skalieren als monolithische Anwendungen,
                            da jeder Service getrennt deployed wird. F√ºr jeden Service kann daher eine optimale Ressourcenzuteilung
                            entsprechend dem tats√§chlichen Bedarf vorgenommen werden.
                        </p>
                    </lsx-carousel-page>
                    <lsx-carousel-page>
                        <img src="skalierung-2.png" class="d-block w-100 mb-5">
                        <p>
                            Bei leicht ansteigender Last k√∂nnte die Cloudumgebung beispielsweise den laufenden Instanzen mehr
                            Leistung zur Verf√ºgung stellen.
                        </p>
                    </lsx-carousel-page>
                    <lsx-carousel-page>
                        <img src="skalierung-3.png" class="d-block w-100 mb-5">
                        <p>
                            In der Regel werden so genannte Skalierungstrigger, wie die Anzahl HTTP-Anfragen je Sekunde, jedoch
                            genutzt, um weitere Serviceinstanzen zu starten. Die eingehenden Anfragen werden dann durch einen Load
                            Balancer gleichm√§√üig auf die Instanzen verteilt.
                        </p>
                    </lsx-carousel-page>
                    <lsx-carousel-page>
                        <img src="skalierung-4.png" class="d-block w-100 mb-5">
                        <p>
                            Damit diese Art der Skalierung funktioniert, d√ºrfen die Services allerdings keine tempor√§ren Sitzungdaten
                            im Hauptspeicher ablegen. Denn es kann in der Regel nicht garantiert werden, dass zusammengeh√∂rige Anfragen
                            stets dieselbe Instanz erreichen. Au√üerdem k√∂nnen die Instanzen jederzeit neugestartet werden, wodurch die
                            im Hauptspeicher liegenden Daten ebenfalls verloren gingen.
                        </p>
                    </lsx-carousel-page>
                    <lsx-carousel-page>
                        <img src="skalierung-5.png" class="d-block w-100 mb-5">
                        <p>
                            Cloud-Anwendungen, welche serverseitige Sitzungsdaten verwalten, persistieren diese daher meist in einer
                            Datenbank. Oft wird hierf√ºr dieselbe Datenbank genutzt, in der auch die origin√§ren Nutzdaten des jeweiligen
                            Microservices liegen. Genauso oft kommen allerdings auch spezialisierte Datenbanken oder Objektspeicher
                            wie Redis zum Einsatz.
                        </p>
                    </lsx-carousel-page>
                    <lsx-carousel-page>
                        <img src="skalierung-6.png" class="d-block w-100 mb-5">
                        <p>
                            Idealerweise ben√∂tigt eine Anwendung √ºberhaupt keine serverseitigen Sitzungsdaten, sondern verwaltet diese
                            rein clientseitig. Dadurch werden der Server entlastet und Zeitverz√∂gerungen aufgrund einer langsamen
                            Internetverbindung vermieden. Gem√§√ü
                            <a href="https://martinfowler.com/articles/distributed-objects-microservices.html" target="_blank">Martin Fowler's ‚ÄûFirst Law of Distributed Objects‚Äù</a>
                            funktioniert dies am besten, wenn die Kommunikation mit dem Backend auf wenige Anfragen mit geb√ºndelten
                            Inhalten reduziert wird.
                        </p>
                    </lsx-carousel-page>

                    <lsx-carousel-page>
                        <img class="active d-block w-25 m-auto" src="../finish.svg" />
                        <p>
                            Wird eine Anwendung nach den vorgenannten Prinzipien serverseitig m√∂glichst zustandslos implementiert,
                            kann sie jederzeit problemlos hoch- oder runterskaliert werden.
                        </p>
                    </lsx-carousel-page>
                </lsx-carousel>
            </section>

            <section data-title="12-Faktor-Apps / Cloud Native Apps">
                <lsx-grid-fluid>
                    <lsx-row>
                        <lsx-col size="lg">
                            <img src="12factor.net.png" class="d-block w-100 dhbw-border">
                        </lsx-col>
                        <lsx-col size="lg">
                            <div class="markdown">
                                Eine elastische Skalierung setzt voraus, dass jederzeit weitere Instanzen eines Services gestartet
                                oder nicht mehr ben√∂tigte Instanzen gestoppt werden k√∂nnen. Um dies zu vereinfachen, haben die Macher
                                der Heroku-Cloud auf der Webseite [12factor.net](https://12factor.net){target=_blank} das 12-Faktor-Manifest
                                mit zw√∂lf Regeln f√ºr **Cloud Native Apps** (auch **12-Faktor-Apps** genannt) ver√∂ffentlicht. Diese lassen
                                sich wie folgt zusammenfassen:
                            </div>

                            <lsx-tab-pages>
                                <lsx-tab-page title="Entwicklung">
                                    <div class="markdown">
                                        * Zentral verwalteter Quellcode
                                        * Abh√§ngigkeiten explizit deklarieren
                                        * Getrennte Build-, Release- und Run-Phasen
                                        * Vergleichbare Entwicklungs- und Produktivumgebungen
            
                                        Microservices werden mit modernen Werkzeugen und modernen Programmierpraktiken entwickelt. Ihr Quellcode
                                        wird deshalb mit Werkzeugen wie Git versioniert, so dass jede √Ñnderung daran nachvollziehbar ist. Werkzeuge
                                        wie `npm`, `pip` oder `maven` verwalten dar√ºber hinaus die Abh√§ngigkeiten zu externen Bibliotheken und sorgen
                                        f√ºr automatisierte Build- und Releaseprozesse.
                                        
                                        Zus√§tzlich finden Entwicklung und Test und vergleichbaren Bedingungen wie der sp√§tere Produktiveinsatz statt,
                                        wof√ºr die Produktivumgebung auf den Entwicklungs- und Testmaschinen so gut wie m√∂glich nachgebildet wird.
                                    </div>
                                </lsx-tab-page>

                                <lsx-tab-page title="Konfiguration">
                                    <div class="markdown">
                                        * Nutzung fremder Dienste √ºber das Netzwerk
                                        * Unterst√ºtzende Dienste sind Ressourcen
                                        * Konfiguration durch Umgebungsvariablen
                                        * Adminprozesse sind einmalige Vorg√§nge

                                        Microservices kommunizieren grunds√§tzlich √ºber das Netzwerk bzw. das Internet mit anderen Microservices.
                                        Andere Schnittstellen sind nicht vorgesehen, um die Microservices auf getrennten virtuellen Maschinen und
                                        oft sogar getrennten physischen Maschinen betreiben zu k√∂nnen. √úber die Konfiguration der Services, welche
                                        innerhalb der Cloudumgebung vorgenommen wird, werden jedem Microservice die Netzadressen der von ihm ben√∂tigten
                                        anderen Services mitgeteilt. Diese stehen dann zur Laufzeit als Umgebungsvariablen des Betriebssystems zur
                                        Verf√ºgung, da es sich hierbei um eine universale, einfache M√∂glichkeit handelt.

                                        Falls administrative Aktionen wie die Reorganisation einer Datenbank oder das L√∂schen veralteter Daten
                                        notwendig sind, erfolgen diese durch einmalig aufgerufene, vom eigentlichen Microservice getrennt laufende
                                        Werkzeugprogramme.
                                    </div>
                                </lsx-tab-page>

                                <lsx-tab-page title="Ausf√ºhrung">
                                    <div class="markdown">
                                        * Ausf√ºhrung als einzelner Betriebssystemprozess
                                        * Parallelit√§t durch weitere Betriebssystemprozesse
                                        * Robuster und schneller Start bzw. Stopp der Prozesse
                                        * Protokollierung durch zeitbezogene Ereignisse

                                        Microservices sind immer in sich geschlossen und bringen s√§mtliche Laufzeitumgebungen, Bibliotheken und
                                        Hilfsprogramme mit, um ausgef√ºhrt werden zu k√∂nnen. Sie k√∂nnen dadurch als einzelner Betriebssystemprozess
                                        leicht gestartet und gestoppt werden, beispielsweise indem sie in ein Container-Image verpackt werden.
                                        Start und Stopp m√ºssen besonders schnell gehen, damit die Skalierung jederzeit elastisch angpasst werden
                                        kann.

                                        F√ºr die Fehlersuche schreiben Microservices umfangreiche Protokollmeldungen in die Konsole (ihre Standardausgabe).
                                        Jede Meldung wird dabei mit einem eindeutigen Zeitstempel am Anfang versehen, so dass die Protokollmeldungen
                                        von der Cloud wie ein kontinuierlicher Datenstrom von zeitpunktbezogenen Ereignissen behandelt und archiviert
                                        werden k√∂nnen.
                                    </div>
                                </lsx-tab-page>
                            </lsx-tab-pages>
                        </lsx-col>
                    </lsx-row>
                </lsx-grid-fluid>
            </section>

            <section data-title="Fallbeispiel: Adressbuch">
                <div class="mb-3">
                    <lsx-github-edit url="https://github.com/DennisSchulmeister/dhbwka-wwi-vertsys-2022-quellcodes/tree/main/Beispielanwendung%20Adressbuch"></lsx-github-edit>
                </div>

                <div class="d-flex flex-column flex-md-row gap-3">
                    <img src="beispiel-adressbuch-1.png" class="img-thumbnail d-block w-100">
                    <img src="beispiel-adressbuch-2.png" class="img-thumbnail d-block w-100">
                    <img src="beispiel-adressbuch-3.png" class="img-thumbnail d-block w-100">
                </div>
            </section>

            <section data-title="Typische nicht-fachliche Microservices">
                <lsx-grid-fluid class="p-0">
                    <lsx-row>
                        <lsx-col size="md-9" class="mb-3">
                            <img src="microservices-planes.png" class="d-block w-100" />
                        </lsx-col>
                        <lsx-col size="md" class="d-flex flex-column gap-3">
                            xxx
                        </lsx-col>
                    </lsx-row>
                </lsx-grid-fluid>
            </section>

            <section data-title="Zwei-Faktor-Authentifizierung ja oder nein?" class="dhbw-limited-width">
                <img src="ct-schlagseite-2fa.jpg" class="d-block w-100" alt="Jeden Tag verschwindet einer ‚Ä¶">
            
                <small>
                    <small>
                        Bildnachweis:
                        <a href="https://www.heise.de/select/ct/2022/11/2200714175714756235" target="_blank">c't 11/2022, S. 13 (Schlagseite)</a>
                    </small>
                </small>
            </section>

            <section data-title="√úberwachung von Microservices">
                <div class="markdown dhbw-limited-width m-auto mb-5">
                    Typische Services in der **Kontrollebene** sind jene zur √úberwachung des laufenden
                    Betriebs einer Cloud-Anwendung. Diese unterteilen sich typischerweise in:

                    * **Metriken:**: Kennzahlen wie Speicherverbrauch, Anzahl Requests je Sekunde, CPU-Auslastung, ...
                    * **Logging:** Protokollausgaben der einzelnen Services, um Fehler nachvollziehen zu k√∂nnen
                    * **Tracing:** Nachverfolgung von Aufrufketten, um komplexe Fehlersituationen analysieren zu k√∂nnen
                </div>
                <div class="d-flex align-items-stretch" style="gap: 1em;">
                    <img src="metriken.png" class="d-block w-100 img-thumbnail" />
                    <img src="logging.png" class="d-block w-100 img-thumbnail" />
                    <img src="tracing.png" class="d-block w-100 img-thumbnail" />
                </div>
            </section>

            <section data-title="Das Circuit-Breaker-Pattern" class="dhbw-limited-width2">
                xxx
            </section>

            <section data-title="Fallbeispiel: Webflicks">
                <div class="mb-3">
                    <lsx-github-edit
                        url="https://github.com/DennisSchulmeister/dhbwka-wwi-vertsys-2022-quellcodes/tree/main/Beispielanwendung%20Webflicks"></lsx-github-edit>
                </div>
            
                <div class="d-flex flex-column flex-md-row gap-3">
                    <img src="beispiel-webflicks-1.png" class="img-thumbnail d-block w-100">
                    <img src="beispiel-webflicks-2.png" class="img-thumbnail d-block w-100">
                    <img src="beispiel-webflicks-3.png" class="img-thumbnail d-block w-100">
                </div>
            </section>
        </main>

        <!-- Navigation -->
        <footer>
            <nav></nav>
        </footer>
    </body>
</html>